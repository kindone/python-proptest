
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Python Property-Based Testing Library">
      
      
        <meta name="author" content="kindone">
      
      
        <link rel="canonical" href="https://kindone.github.io/python-proptest/combinators/">
      
      
        <link rel="prev" href="../generators/">
      
      
        <link rel="next" href="../properties/">
      
      
      <link rel="icon" href="../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Combinators - python-proptest</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CSpline+Sans+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"Spline Sans Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="light-green">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#combinators" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="python-proptest" class="md-header__button md-logo" aria-label="python-proptest" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            python-proptest
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Combinators
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/kindone/python-proptest" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    kindone/python-proptest
  </div>
</a>
      </div>
    
  </nav>
  
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="python-proptest" class="md-nav__button md-logo" aria-label="python-proptest" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    python-proptest
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/kindone/python-proptest" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    kindone/python-proptest
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../generators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Generators
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Combinators
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Combinators
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#combinator-summary-table" class="md-nav__link">
    <span class="md-ellipsis">
      Combinator Summary Table
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#selection-combinators" class="md-nav__link">
    <span class="md-ellipsis">
      Selection Combinators
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Selection Combinators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#genone_ofgenerators" class="md-nav__link">
    <span class="md-ellipsis">
      Gen.one_of(*generators)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#genelement_ofvalues" class="md-nav__link">
    <span class="md-ellipsis">
      Gen.element_of(*values)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#genweighted_gengenerator-weight" class="md-nav__link">
    <span class="md-ellipsis">
      Gen.weighted_gen(generator, weight)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#genweighted_valuevalue-weight" class="md-nav__link">
    <span class="md-ellipsis">
      Gen.weighted_value(value, weight)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transformation-combinators" class="md-nav__link">
    <span class="md-ellipsis">
      Transformation Combinators
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Transformation Combinators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generatormapfunc" class="md-nav__link">
    <span class="md-ellipsis">
      generator.map(func)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generatorfilterpredicate" class="md-nav__link">
    <span class="md-ellipsis">
      generator.filter(predicate)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generatorflat_mapfunc" class="md-nav__link">
    <span class="md-ellipsis">
      generator.flat_map(func)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependent-generation-combinators" class="md-nav__link">
    <span class="md-ellipsis">
      Dependent Generation Combinators
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dependent Generation Combinators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#genchainbase_gen-gen_factory-generatorchaingen_factory" class="md-nav__link">
    <span class="md-ellipsis">
      Gen.chain(base_gen, gen_factory) / generator.chain(gen_factory)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#genaggregateinitial_gen-gen_factory-min_size-max_size-generatoraggregate" class="md-nav__link">
    <span class="md-ellipsis">
      Gen.aggregate(initial_gen, gen_factory, min_size, max_size) / generator.aggregate(...)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#genaccumulateinitial_gen-gen_factory-min_size-max_size-generatoraccumulate" class="md-nav__link">
    <span class="md-ellipsis">
      Gen.accumulate(initial_gen, gen_factory, min_size, max_size) / generator.accumulate(...)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comparison-chain-vs-aggregate-vs-accumulate" class="md-nav__link">
    <span class="md-ellipsis">
      Comparison: chain vs aggregate vs accumulate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#class-construction-combinators" class="md-nav__link">
    <span class="md-ellipsis">
      Class Construction Combinators
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Class Construction Combinators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#genconstructtype-generators" class="md-nav__link">
    <span class="md-ellipsis">
      Gen.construct(Type, *generators)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-combinator-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Combinator Patterns
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Combinator Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chaining-combinators" class="md-nav__link">
    <span class="md-ellipsis">
      Chaining Combinators
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conditional-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Conditional Generation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recursive-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Recursive Generation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#performance-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Considerations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#readability-tips" class="md-nav__link">
    <span class="md-ellipsis">
      Readability Tips
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Strategies
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../properties/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../decorators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Decorators
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../shrinking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Shrinking
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../stateful-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stateful Testing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../pytest-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pytest Integration
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../unittest-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Unittest Integration
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../pytest-best-practices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pytest Best Practices
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#combinator-summary-table" class="md-nav__link">
    <span class="md-ellipsis">
      Combinator Summary Table
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#selection-combinators" class="md-nav__link">
    <span class="md-ellipsis">
      Selection Combinators
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Selection Combinators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#genone_ofgenerators" class="md-nav__link">
    <span class="md-ellipsis">
      Gen.one_of(*generators)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#genelement_ofvalues" class="md-nav__link">
    <span class="md-ellipsis">
      Gen.element_of(*values)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#genweighted_gengenerator-weight" class="md-nav__link">
    <span class="md-ellipsis">
      Gen.weighted_gen(generator, weight)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#genweighted_valuevalue-weight" class="md-nav__link">
    <span class="md-ellipsis">
      Gen.weighted_value(value, weight)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transformation-combinators" class="md-nav__link">
    <span class="md-ellipsis">
      Transformation Combinators
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Transformation Combinators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generatormapfunc" class="md-nav__link">
    <span class="md-ellipsis">
      generator.map(func)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generatorfilterpredicate" class="md-nav__link">
    <span class="md-ellipsis">
      generator.filter(predicate)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generatorflat_mapfunc" class="md-nav__link">
    <span class="md-ellipsis">
      generator.flat_map(func)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependent-generation-combinators" class="md-nav__link">
    <span class="md-ellipsis">
      Dependent Generation Combinators
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dependent Generation Combinators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#genchainbase_gen-gen_factory-generatorchaingen_factory" class="md-nav__link">
    <span class="md-ellipsis">
      Gen.chain(base_gen, gen_factory) / generator.chain(gen_factory)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#genaggregateinitial_gen-gen_factory-min_size-max_size-generatoraggregate" class="md-nav__link">
    <span class="md-ellipsis">
      Gen.aggregate(initial_gen, gen_factory, min_size, max_size) / generator.aggregate(...)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#genaccumulateinitial_gen-gen_factory-min_size-max_size-generatoraccumulate" class="md-nav__link">
    <span class="md-ellipsis">
      Gen.accumulate(initial_gen, gen_factory, min_size, max_size) / generator.accumulate(...)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comparison-chain-vs-aggregate-vs-accumulate" class="md-nav__link">
    <span class="md-ellipsis">
      Comparison: chain vs aggregate vs accumulate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#class-construction-combinators" class="md-nav__link">
    <span class="md-ellipsis">
      Class Construction Combinators
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Class Construction Combinators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#genconstructtype-generators" class="md-nav__link">
    <span class="md-ellipsis">
      Gen.construct(Type, *generators)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-combinator-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Combinator Patterns
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Combinator Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chaining-combinators" class="md-nav__link">
    <span class="md-ellipsis">
      Chaining Combinators
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conditional-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Conditional Generation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recursive-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Recursive Generation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#performance-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Considerations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#readability-tips" class="md-nav__link">
    <span class="md-ellipsis">
      Readability Tips
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Strategies
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="combinators">Combinators<a class="headerlink" href="#combinators" title="Permanent link">&para;</a></h1>
<p>Combinators are higher-order functions that manipulate or combine existing generators (<code>Gen</code>) to create new, more sophisticated generators. They are the primary mechanism in <code>python-proptest</code> for building generators that produce complex data structures, implement specific constraints, or tailor data generation to the precise needs of your tests. Instead of just using basic generators like <code>Gen.int()</code> or <code>Gen.str()</code>, combinators allow you to compose these building blocks into generators for custom objects, lists with specific properties, or data distributions that mimic real-world scenarios. Mastering combinators is key to unlocking the full potential of property-based testing.</p>
<h2 id="combinator-summary-table">Combinator Summary Table<a class="headerlink" href="#combinator-summary-table" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th style="text-align: left;">Combinator</th>
<th style="text-align: left;">Description</th>
<th style="text-align: left;">Key Parameters</th>
<th style="text-align: left;">Example Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>Selection</strong></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;"><a href="#genone_ofgenerators"><code>Gen.one_of(...gens)</code></a></td>
<td style="text-align: left;">Randomly picks one generator from <code>gens</code> to produce a value. Use <a href="#genweighted_gengenerator-weight"><code>weighted_gen</code></a> to adjust probabilities.</td>
<td style="text-align: left;"><code>...generators</code> (can be <code>Weighted</code>)</td>
<td style="text-align: left;"><code>Gen.one_of(Gen.int(min_value=0, max_value=10), Gen.int(min_value=20, max_value=30))</code> (Union of ranges)</td>
</tr>
<tr>
<td style="text-align: left;"><a href="#genelement_ofvalues"><code>Gen.element_of(...values)</code></a></td>
<td style="text-align: left;">Randomly picks one value from the provided <code>values</code>. Use <a href="#genweighted_valuevalue-weight"><code>weighted_value</code></a> to adjust probabilities.</td>
<td style="text-align: left;"><code>...values</code> (can be <code>Weighted</code>)</td>
<td style="text-align: left;"><code>Gen.element_of(2, 3, 5, 7)</code> (Prime numbers &lt; 10)</td>
</tr>
<tr>
<td style="text-align: left;"><a href="#genweighted_gengenerator-weight"><code>Gen.weighted_gen(gen, weight)</code></a></td>
<td style="text-align: left;">Wraps a generator with a <code>weight</code> for <a href="#genone_ofgenerators"><code>Gen.one_of</code></a>.</td>
<td style="text-align: left;"><code>generator</code>, <code>weight</code></td>
<td style="text-align: left;"><code>Gen.weighted_gen(Gen.str(), 0.8)</code> (80% probability)</td>
</tr>
<tr>
<td style="text-align: left;"><a href="#genweighted_valuevalue-weight"><code>Gen.weighted_value(value, weight)</code></a></td>
<td style="text-align: left;">Wraps a value with a <code>weight</code> for <a href="#genelement_ofvalues"><code>Gen.element_of</code></a>.</td>
<td style="text-align: left;"><code>value</code>, <code>weight</code></td>
<td style="text-align: left;"><code>Gen.weighted_value('a', 0.2)</code> (20% probability)</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Transformation</strong></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;"><a href="#generatormapfunc"><code>generator.map(f)</code></a></td>
<td style="text-align: left;">Applies function <code>f</code> to each generated value.</td>
<td style="text-align: left;"><code>(value: T) -&gt; U</code></td>
<td style="text-align: left;"><code>Gen.int(min_value=1, max_value=100).map(lambda n: str(n))</code> (Stringified numbers within [1,100])</td>
</tr>
<tr>
<td style="text-align: left;"><a href="#generatorfilterpredicate"><code>generator.filter(predicate)</code></a></td>
<td style="text-align: left;">Only keeps values where <code>predicate(value)</code> is true.</td>
<td style="text-align: left;"><code>(value: T) -&gt; bool</code></td>
<td style="text-align: left;"><code>Gen.int().filter(lambda n: n % 2 == 0)</code> (Even numbers)</td>
</tr>
<tr>
<td style="text-align: left;"><a href="#generatorflat_mapfunc"><code>generator.flat_map(f)</code></a> / <a href="#generatorflat_mapfunc"><code>generator.chain(f)</code></a></td>
<td style="text-align: left;">Creates a dependent generator using <code>f(value)</code> which returns a new Gen.</td>
<td style="text-align: left;"><code>(value: T) -&gt; Generator[U]</code></td>
<td style="text-align: left;"><code>Gen.int(min_value=1, max_value=5).flat_map(lambda n: Gen.str(min_length=n))</code> (String of random length within [1,5))</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Dependent Generation</strong></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;"><a href="#genchainbase_gen-gen_factory-generatorchaingen_factory"><code>Gen.chain(base_gen, gen_factory)</code></a></td>
<td style="text-align: left;">Creates dependent tuple where next value depends on previous.</td>
<td style="text-align: left;"><code>base_gen</code>, <code>(value) -&gt; Generator</code></td>
<td style="text-align: left;"><code>Gen.chain(Gen.int(1, 12), lambda m: Gen.int(1, days_in_month(m)))</code> (Valid month/day)</td>
</tr>
<tr>
<td style="text-align: left;"><a href="#genaggregateinitial_gen-gen_factory-min_size-max_size-generatoraggregate"><code>Gen.aggregate(initial_gen, gen_factory, ...)</code></a></td>
<td style="text-align: left;">Generates list where each element depends on previous.</td>
<td style="text-align: left;"><code>initial_gen</code>, <code>(value) -&gt; Generator</code>, <code>min/max_size</code></td>
<td style="text-align: left;"><code>Gen.aggregate(Gen.int(0, 10), lambda n: Gen.int(n, n+5), min_size=3)</code> (Increasing list)</td>
</tr>
<tr>
<td style="text-align: left;"><a href="#genaccumulateinitial_gen-gen_factory-min_size-max_size-generatoraccumulate"><code>Gen.accumulate(initial_gen, gen_factory, ...)</code></a></td>
<td style="text-align: left;">Generates final value after N dependent steps.</td>
<td style="text-align: left;"><code>initial_gen</code>, <code>(value) -&gt; Generator</code>, <code>min/max_size</code></td>
<td style="text-align: left;"><code>Gen.accumulate(Gen.int(50, 50), lambda p: Gen.int(max(0,p-10), min(100,p+10)), min_size=10)</code> (Random walk endpoint)</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Class Construction</strong></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;"><a href="#genconstructtype-generators"><code>Gen.construct(Class, ...arg_gens)</code></a></td>
<td style="text-align: left;">Creates class instances using <code>Class(...args)</code> from <code>arg_gens</code>.</td>
<td style="text-align: left;"><code>Constructor</code>, <code>...argument_generators</code></td>
<td style="text-align: left;"><code>Gen.construct(Point, Gen.int(), Gen.int())</code> (Construct Point object)</td>
</tr>
</tbody>
</table>
<h2 id="selection-combinators">Selection Combinators<a class="headerlink" href="#selection-combinators" title="Permanent link">&para;</a></h2>
<h3 id="genone_ofgenerators"><code>Gen.one_of(*generators)</code><a class="headerlink" href="#genone_ofgenerators" title="Permanent link">&para;</a></h3>
<p>Randomly chooses one generator from the provided generators to produce a value. Each generator has an equal probability of being selected unless weights are specified.</p>
<p><strong>Parameters:</strong>
- <code>*generators</code> (Generator or Weighted): Variable number of generators, optionally wrapped with <a href="#genweighted_gengenerator-weight"><code>Gen.weighted_gen()</code></a></p>
<p><strong>Examples:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># Equal probability selection</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">one_of</span><span class="p">(</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="n">min_value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">max_value</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="n">min_value</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">max_value</span><span class="o">=</span><span class="mi">30</span><span class="p">),</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="n">min_length</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Weighted selection</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">one_of</span><span class="p">(</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">weighted_gen</span><span class="p">(</span><span class="n">Gen</span><span class="o">.</span><span class="n">str</span><span class="p">(),</span> <span class="mf">0.8</span><span class="p">),</span>  <span class="c1"># 80% probability</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">weighted_gen</span><span class="p">(</span><span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(),</span> <span class="mf">0.2</span><span class="p">)</span>   <span class="c1"># 20% probability</span>
<span class="p">)</span>

<span class="c1"># Mixed weighted and unweighted</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">one_of</span><span class="p">(</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">weighted_gen</span><span class="p">(</span><span class="n">Gen</span><span class="o">.</span><span class="n">str</span><span class="p">(),</span> <span class="mf">0.5</span><span class="p">),</span>  <span class="c1"># 50% probability</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(),</span>                         <span class="c1"># 25% probability (remaining split)</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">bool</span><span class="p">()</span>                         <span class="c1"># 25% probability (remaining split)</span>
<span class="p">)</span>
</code></pre></div></p>
<p><strong>Use Cases:</strong>
- Creating union types
- Testing multiple data types
- Implementing weighted random selection
- Creating complex data distributions</p>
<p><strong>See Also:</strong> <a href="#genelement_ofvalues"><code>Gen.element_of()</code></a>, <a href="#genweighted_gengenerator-weight"><code>Gen.weighted_gen()</code></a></p>
<h3 id="genelement_ofvalues"><code>Gen.element_of(*values)</code><a class="headerlink" href="#genelement_ofvalues" title="Permanent link">&para;</a></h3>
<p>Randomly chooses one value from the provided values. Each value has an equal probability of being selected unless weights are specified.</p>
<p><strong>Parameters:</strong>
- <code>*values</code> (Any or WeightedValue): Variable number of values, optionally wrapped with <a href="#genweighted_valuevalue-weight"><code>Gen.weighted_value()</code></a></p>
<p><strong>Examples:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># Equal probability selection</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">element_of</span><span class="p">(</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="s2">&quot;yellow&quot;</span><span class="p">)</span>

<span class="c1"># Prime numbers</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">element_of</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">19</span><span class="p">)</span>

<span class="c1"># Weighted selection</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">element_of</span><span class="p">(</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">weighted_value</span><span class="p">(</span><span class="s2">&quot;common&quot;</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">),</span>    <span class="c1"># 70% probability</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">weighted_value</span><span class="p">(</span><span class="s2">&quot;rare&quot;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>       <span class="c1"># 30% probability</span>
<span class="p">)</span>

<span class="c1"># Mixed weighted and unweighted</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">element_of</span><span class="p">(</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">weighted_value</span><span class="p">(</span><span class="s2">&quot;frequent&quot;</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">),</span>  <span class="c1"># 60% probability</span>
    <span class="s2">&quot;normal&quot;</span><span class="p">,</span>                             <span class="c1"># 20% probability</span>
    <span class="s2">&quot;rare&quot;</span>                                <span class="c1"># 20% probability</span>
<span class="p">)</span>
</code></pre></div></p>
<p><strong>Use Cases:</strong>
- Testing enum-like values
- Creating categorical data
- Implementing weighted choices
- Testing specific edge cases</p>
<p><strong>See Also:</strong> <a href="#genone_ofgenerators"><code>Gen.one_of()</code></a>, <a href="#genweighted_valuevalue-weight"><code>Gen.weighted_value()</code></a></p>
<h3 id="genweighted_gengenerator-weight"><code>Gen.weighted_gen(generator, weight)</code><a class="headerlink" href="#genweighted_gengenerator-weight" title="Permanent link">&para;</a></h3>
<p>Wraps a generator with a weight for use in <a href="#genone_ofgenerators"><code>Gen.one_of()</code></a>. The weight determines the probability of selecting this generator.</p>
<p><strong>Parameters:</strong>
- <code>generator</code> (Generator): The generator to wrap
- <code>weight</code> (float): Probability weight (0.0 to 1.0)</p>
<p><strong>Examples:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># Create weighted generators</span>
<span class="n">common_gen</span> <span class="o">=</span> <span class="n">Gen</span><span class="o">.</span><span class="n">weighted_gen</span><span class="p">(</span><span class="n">Gen</span><span class="o">.</span><span class="n">str</span><span class="p">(),</span> <span class="mf">0.8</span><span class="p">)</span>
<span class="n">rare_gen</span> <span class="o">=</span> <span class="n">Gen</span><span class="o">.</span><span class="n">weighted_gen</span><span class="p">(</span><span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(),</span> <span class="mf">0.2</span><span class="p">)</span>

<span class="c1"># Use in one_of</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">one_of</span><span class="p">(</span><span class="n">common_gen</span><span class="p">,</span> <span class="n">rare_gen</span><span class="p">)</span>

<span class="c1"># Multiple weighted generators</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">one_of</span><span class="p">(</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">weighted_gen</span><span class="p">(</span><span class="n">Gen</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="n">min_length</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span> <span class="mf">0.5</span><span class="p">),</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">weighted_gen</span><span class="p">(</span><span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="n">min_value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_value</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span> <span class="mf">0.3</span><span class="p">),</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">weighted_gen</span><span class="p">(</span><span class="n">Gen</span><span class="o">.</span><span class="n">bool</span><span class="p">(),</span> <span class="mf">0.2</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div></p>
<p><strong>Use Cases:</strong>
- Creating realistic data distributions
- Testing with biased inputs
- Implementing weighted random selection
- Simulating real-world scenarios</p>
<p><strong>See Also:</strong> <a href="#genone_ofgenerators"><code>Gen.one_of()</code></a>, <a href="#genweighted_valuevalue-weight"><code>Gen.weighted_value()</code></a></p>
<h3 id="genweighted_valuevalue-weight"><code>Gen.weighted_value(value, weight)</code><a class="headerlink" href="#genweighted_valuevalue-weight" title="Permanent link">&para;</a></h3>
<p>Wraps a value with a weight for use in <a href="#genelement_ofvalues"><code>Gen.element_of()</code></a>. The weight determines the probability of selecting this value.</p>
<p><strong>Parameters:</strong>
- <code>value</code> (Any): The value to wrap
- <code>weight</code> (float): Probability weight (0.0 to 1.0)</p>
<p><strong>Examples:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># Create weighted values</span>
<span class="n">common_value</span> <span class="o">=</span> <span class="n">Gen</span><span class="o">.</span><span class="n">weighted_value</span><span class="p">(</span><span class="s2">&quot;success&quot;</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">)</span>
<span class="n">rare_value</span> <span class="o">=</span> <span class="n">Gen</span><span class="o">.</span><span class="n">weighted_value</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>

<span class="c1"># Use in element_of</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">element_of</span><span class="p">(</span><span class="n">common_value</span><span class="p">,</span> <span class="n">rare_value</span><span class="p">)</span>

<span class="c1"># Multiple weighted values</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">element_of</span><span class="p">(</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">weighted_value</span><span class="p">(</span><span class="s2">&quot;low&quot;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">weighted_value</span><span class="p">(</span><span class="s2">&quot;medium&quot;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">weighted_value</span><span class="p">(</span><span class="s2">&quot;high&quot;</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div></p>
<p><strong>Use Cases:</strong>
- Creating realistic categorical distributions
- Testing with biased inputs
- Implementing weighted choices
- Simulating real-world scenarios</p>
<p><strong>See Also:</strong> <a href="#genelement_ofvalues"><code>Gen.element_of()</code></a>, <a href="#genweighted_gengenerator-weight"><code>Gen.weighted_gen()</code></a></p>
<h2 id="transformation-combinators">Transformation Combinators<a class="headerlink" href="#transformation-combinators" title="Permanent link">&para;</a></h2>
<h3 id="generatormapfunc"><code>generator.map(func)</code><a class="headerlink" href="#generatormapfunc" title="Permanent link">&para;</a></h3>
<p>Transforms each generated value using the provided function. This is one of the most commonly used combinators.</p>
<p><strong>Parameters:</strong>
- <code>func</code> (Callable[[T], U]): Function that transforms a value of type T to type U</p>
<p><strong>Examples:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># Transform integers to strings</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="n">min_value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_value</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>

<span class="c1"># Transform to custom objects</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_user</span><span class="p">(</span><span class="n">id_num</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">id_num</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;user</span><span class="si">{</span><span class="n">id_num</span><span class="si">}</span><span class="s2">@example.com&quot;</span><span class="p">}</span>

<span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="n">min_value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_value</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">create_user</span><span class="p">)</span>

<span class="c1"># Transform to tuples</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">()</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">3</span><span class="p">))</span>

<span class="c1"># Transform strings</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">str</span><span class="p">()</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>

<span class="c1"># Transform lists</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">())</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">lst</span><span class="p">:</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">lst</span><span class="p">))</span>
</code></pre></div></p>
<p><strong>Use Cases:</strong>
- Converting between data types
- Creating custom objects
- Applying transformations to generated data
- Building complex data structures</p>
<p><strong>See Also:</strong> <a href="#generatorfilterpredicate"><code>generator.filter()</code></a>, <a href="#generatorflat_mapfunc"><code>generator.flat_map()</code></a></p>
<h3 id="generatorfilterpredicate"><code>generator.filter(predicate)</code><a class="headerlink" href="#generatorfilterpredicate" title="Permanent link">&para;</a></h3>
<p>Only keeps values that satisfy the given predicate function. Be cautious with restrictive predicates as they can slow down generation.</p>
<p><strong>Parameters:</strong>
- <code>predicate</code> (Callable[[T], bool]): Function that returns True for values to keep</p>
<p><strong>Examples:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># Filter even numbers</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>

<span class="c1"># Filter non-empty strings</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">str</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>

<span class="c1"># Filter positive numbers</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">float</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>

<span class="c1"># Filter lists with specific properties</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">())</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">lst</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">))</span>

<span class="c1"># Filter based on multiple conditions</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">100</span> <span class="ow">and</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div></p>
<p><strong>Use Cases:</strong>
- Restricting value ranges
- Testing specific conditions
- Creating constrained test data
- Implementing business rules</p>
<p><strong>Performance Considerations:</strong>
- Avoid overly restrictive predicates
- Consider using <code>Gen.in_range()</code> instead of filtering ranges
- Use <code>Gen.one_of()</code> for categorical filtering</p>
<p><strong>See Also:</strong> <a href="#generatormapfunc"><code>generator.map()</code></a>, <a href="#generatorflat_mapfunc"><code>generator.flat_map()</code></a></p>
<h3 id="generatorflat_mapfunc"><code>generator.flat_map(func)</code><a class="headerlink" href="#generatorflat_mapfunc" title="Permanent link">&para;</a></h3>
<p>Creates a dependent generator where the function takes a generated value and returns a new generator. This is powerful for creating related test data. For more complex dependent generation, consider using <a href="#genchainbase_gen-gen_factory-generatorchaingen_factory"><code>Gen.chain()</code></a>.</p>
<p><strong>Parameters:</strong>
- <code>func</code> (Callable[[T], Generator[U]]): Function that takes a value and returns a generator</p>
<p><strong>Examples:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># Generate string length based on integer</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="n">min_value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_value</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">flat_map</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">length</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="n">min_length</span><span class="o">=</span><span class="n">length</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="n">length</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Generate list size based on integer</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="n">min_value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_value</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">flat_map</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">size</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(),</span> <span class="n">min_length</span><span class="o">=</span><span class="n">size</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="n">size</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Generate dependent values</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_dependent_data</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="n">min_value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_value</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="n">min_value</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">max_value</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>

<span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">()</span><span class="o">.</span><span class="n">flat_map</span><span class="p">(</span><span class="n">create_dependent_data</span><span class="p">)</span>

<span class="c1"># Generate nested structures</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="n">min_value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_value</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">flat_map</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">depth</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">list</span><span class="p">(</span>
        <span class="n">Gen</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="n">min_length</span><span class="o">=</span><span class="n">depth</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="n">depth</span><span class="p">),</span>
        <span class="n">min_length</span><span class="o">=</span><span class="n">depth</span><span class="p">,</span>
        <span class="n">max_length</span><span class="o">=</span><span class="n">depth</span>
    <span class="p">)</span>
<span class="p">)</span>
</code></pre></div></p>
<p><strong>Use Cases:</strong>
- Creating dependent test data
- Generating related values
- Building complex nested structures
- Implementing conditional generation</p>
<p><strong>See Also:</strong> <a href="#generatormapfunc"><code>generator.map()</code></a>, <a href="#generatorfilterpredicate"><code>generator.filter()</code></a>, <a href="#genchainbase_gen-gen_factory-generatorchaingen_factory"><code>Gen.chain()</code></a></p>
<h2 id="dependent-generation-combinators">Dependent Generation Combinators<a class="headerlink" href="#dependent-generation-combinators" title="Permanent link">&para;</a></h2>
<p>Dependent generation combinators allow you to create generators where subsequent values depend on previously generated values. These are essential for testing stateful systems, sequences with constraints, or data with complex interdependencies.</p>
<p>For testing with dependent generators, see the <a href="../decorators/#run_for_all"><code>@run_for_all</code> decorator</a> which provides clean syntax for property tests using these combinators.</p>
<h3 id="genchainbase_gen-gen_factory-generatorchaingen_factory"><code>Gen.chain(base_gen, gen_factory)</code> / <code>generator.chain(gen_factory)</code><a class="headerlink" href="#genchainbase_gen-gen_factory-generatorchaingen_factory" title="Permanent link">&para;</a></h3>
<p>Creates a tuple generator where the next value depends on the previously generated value(s). The result is always a tuple containing all generated values.</p>
<p><strong>Parameters:</strong>
- <code>base_gen</code> (Generator): Generator for the initial value(s) - can produce single value or tuple
- <code>gen_factory</code> (Callable[[T], Generator[U]]): Function that takes the base value and returns a generator</p>
<p><strong>Static API Examples:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># Simple dependency: month -&gt; valid day</span>
<span class="k">def</span><span class="w"> </span><span class="nf">days_in_month</span><span class="p">(</span><span class="n">month</span><span class="p">):</span>
    <span class="n">days</span> <span class="o">=</span> <span class="p">[</span><span class="mi">31</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">31</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">days</span><span class="p">[</span><span class="n">month</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>

<span class="n">date_gen</span> <span class="o">=</span> <span class="n">Gen</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>  <span class="c1"># Generate month</span>
    <span class="k">lambda</span> <span class="n">month</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">days_in_month</span><span class="p">(</span><span class="n">month</span><span class="p">))</span>  <span class="c1"># Generate valid day for that month</span>
<span class="p">)</span>
<span class="c1"># Result: Generator[Tuple[int, int]] producing (month, day) pairs like (2, 28), (12, 31)</span>

<span class="c1"># Multiple chaining: month -&gt; day -&gt; hour</span>
<span class="n">datetime_gen</span> <span class="o">=</span> <span class="n">Gen</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span>
    <span class="n">date_gen</span><span class="p">,</span>  <span class="c1"># Base is already a tuple (month, day)</span>
    <span class="k">lambda</span> <span class="n">date_tuple</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">23</span><span class="p">)</span>  <span class="c1"># Generate hour</span>
<span class="p">)</span>
<span class="c1"># Result: Generator[Tuple[int, int, int]] producing (month, day, hour) like (3, 15, 14)</span>

<span class="c1"># Width constrains height</span>
<span class="n">rect_gen</span> <span class="o">=</span> <span class="n">Gen</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>  <span class="c1"># Generate width</span>
    <span class="k">lambda</span> <span class="n">width</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">200</span> <span class="o">//</span> <span class="n">width</span><span class="p">)</span>  <span class="c1"># Height constrained by width</span>
<span class="p">)</span>
<span class="c1"># Result: Generator[Tuple[int, int]] ensuring width * height &lt;= 200</span>
</code></pre></div></p>
<p><strong>Fluent API Examples:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># Fluent API style (more concise)</span>
<span class="n">date_gen</span> <span class="o">=</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">month</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">days_in_month</span><span class="p">(</span><span class="n">month</span><span class="p">))</span>
<span class="p">)</span>

<span class="c1"># Can chain multiple times</span>
<span class="n">datetime_gen</span> <span class="o">=</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>\
    <span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="k">lambda</span> <span class="n">month</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">days_in_month</span><span class="p">(</span><span class="n">month</span><span class="p">)))</span>\
    <span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="k">lambda</span> <span class="n">date</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">23</span><span class="p">))</span>
</code></pre></div></p>
<p><strong>Use Cases:</strong>
- Generating valid date combinations (month/day, hour/minute)
- Creating dependent geometric properties (width/height with area constraint)
- Testing APIs with dependent parameters
- Generating valid state transitions
- Creating dependent tuple data</p>
<p><strong>See Also:</strong> <a href="#genaggregateinitial_gen-gen_factory-min_size-max_size-generatoraggregate"><code>Gen.aggregate()</code></a>, <a href="#genaccumulateinitial_gen-gen_factory-min_size-max_size-generatoraccumulate"><code>Gen.accumulate()</code></a>, <a href="#generatorflat_mapfunc"><code>generator.flat_map()</code></a>, <a href="../decorators/#run_for_all"><code>@run_for_all</code> decorator</a></p>
<h3 id="genaggregateinitial_gen-gen_factory-min_size-max_size-generatoraggregate"><code>Gen.aggregate(initial_gen, gen_factory, min_size, max_size)</code> / <code>generator.aggregate(...)</code><a class="headerlink" href="#genaggregateinitial_gen-gen_factory-min_size-max_size-generatoraggregate" title="Permanent link">&para;</a></h3>
<p>Generates a <strong>list</strong> where each element depends on the previous element. Returns the entire sequence of generated values.</p>
<p><strong>Parameters:</strong>
- <code>initial_gen</code> (Generator[T]): Generator for the first element
- <code>gen_factory</code> (Callable[[T], Generator[T]]): Function that takes a value and returns a generator for the next value
- <code>min_size</code> (int): Minimum number of elements (default: 0)
- <code>max_size</code> (int): Maximum number of elements (default: 10)</p>
<p><strong>Static API Examples:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># Increasing sequence: each element &gt;= previous</span>
<span class="n">increasing_gen</span> <span class="o">=</span> <span class="n">Gen</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>  <span class="c1"># Start with 0-10</span>
    <span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">5</span><span class="p">),</span>  <span class="c1"># Each next value is n to n+5</span>
    <span class="n">min_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">max_size</span><span class="o">=</span><span class="mi">10</span>
<span class="p">)</span>
<span class="c1"># Result: [5, 8, 12, 15, 18] - entire sequence of increasing numbers</span>

<span class="c1"># Strictly increasing sequence</span>
<span class="n">strictly_increasing_gen</span> <span class="o">=</span> <span class="n">Gen</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
    <span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">10</span><span class="p">),</span>  <span class="c1"># Each next value is &gt; previous</span>
    <span class="n">min_size</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
    <span class="n">max_size</span><span class="o">=</span><span class="mi">7</span>
<span class="p">)</span>
<span class="c1"># Result: [2, 5, 8, 15] - each element strictly &gt; previous</span>

<span class="c1"># Bounded random walk</span>
<span class="n">walk_gen</span> <span class="o">=</span> <span class="n">Gen</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span>  <span class="c1"># Start at position 50</span>
    <span class="k">lambda</span> <span class="n">pos</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">pos</span> <span class="o">-</span> <span class="mi">10</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">10</span><span class="p">)),</span>  <span class="c1"># Move ±10</span>
    <span class="n">min_size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">max_size</span><span class="o">=</span><span class="mi">20</span>
<span class="p">)</span>
<span class="c1"># Result: [50, 45, 52, 48, 38, ...] - random walk staying in [0, 100]</span>

<span class="c1"># Growing strings</span>
<span class="n">string_growth_gen</span> <span class="o">=</span> <span class="n">Gen</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">ascii_string</span><span class="p">(</span><span class="n">min_length</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
    <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">ascii_string</span><span class="p">(</span><span class="n">min_length</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="n">max_length</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">),</span>
    <span class="n">min_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">max_size</span><span class="o">=</span><span class="mi">8</span>
<span class="p">)</span>
<span class="c1"># Result: [&#39;ab&#39;, &#39;abc&#39;, &#39;abcde&#39;, &#39;abcdefg&#39;] - strings growing in length</span>
</code></pre></div></p>
<p><strong>Fluent API Examples:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># Fluent style</span>
<span class="n">increasing_gen</span> <span class="o">=</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">5</span><span class="p">),</span>
    <span class="n">min_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">max_size</span><span class="o">=</span><span class="mi">10</span>
<span class="p">)</span>

<span class="c1"># Chain with other combinators</span>
<span class="n">filtered_walk</span> <span class="o">=</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">pos</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">pos</span> <span class="o">-</span> <span class="mi">10</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">10</span><span class="p">)),</span>
    <span class="n">min_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">max_size</span><span class="o">=</span><span class="mi">20</span>
<span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">path</span><span class="p">:</span> <span class="n">path</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">30</span><span class="p">)</span>  <span class="c1"># Only paths ending above 30</span>
</code></pre></div></p>
<p><strong>Use Cases:</strong>
- Simulating sequences with constraints (increasing values, bounded movements)
- Testing stateful systems where each state depends on previous
- Generating time series data
- Creating dependency chains
- Testing algorithms that process sequences
- Simulating random walks or stochastic processes</p>
<p><strong>See Also:</strong> <a href="#genchainbase_gen-gen_factory-generatorchaingen_factory"><code>Gen.chain()</code></a>, <a href="#genaccumulateinitial_gen-gen_factory-min_size-max_size-generatoraccumulate"><code>Gen.accumulate()</code></a>, <a href="../decorators/#run_for_all"><code>@run_for_all</code> decorator</a></p>
<h3 id="genaccumulateinitial_gen-gen_factory-min_size-max_size-generatoraccumulate"><code>Gen.accumulate(initial_gen, gen_factory, min_size, max_size)</code> / <code>generator.accumulate(...)</code><a class="headerlink" href="#genaccumulateinitial_gen-gen_factory-min_size-max_size-generatoraccumulate" title="Permanent link">&para;</a></h3>
<p>Generates a <strong>single final value</strong> after N dependent generation steps. Like <a href="#genaggregateinitial_gen-gen_factory-min_size-max_size-generatoraggregate"><code>aggregate</code></a>, but returns only the end result, not the intermediate values.</p>
<p><strong>Parameters:</strong>
- <code>initial_gen</code> (Generator[T]): Generator for the initial value
- <code>gen_factory</code> (Callable[[T], Generator[T]]): Function that takes a value and returns a generator for the next value
- <code>min_size</code> (int): Minimum number of accumulation steps (default: 0)
- <code>max_size</code> (int): Maximum number of accumulation steps (default: 10)</p>
<p><strong>Static API Examples:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># Random walk - final position only</span>
<span class="n">final_position_gen</span> <span class="o">=</span> <span class="n">Gen</span><span class="o">.</span><span class="n">accumulate</span><span class="p">(</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>  <span class="c1"># Start position</span>
    <span class="k">lambda</span> <span class="n">pos</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">pos</span> <span class="o">-</span> <span class="mi">5</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)),</span>  <span class="c1"># Move ±5</span>
    <span class="n">min_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">max_size</span><span class="o">=</span><span class="mi">50</span>
<span class="p">)</span>
<span class="c1"># Result: 67 - single int (final position after 10-50 steps)</span>

<span class="c1"># Compound growth - final amount only</span>
<span class="n">final_amount_gen</span> <span class="o">=</span> <span class="n">Gen</span><span class="o">.</span><span class="n">accumulate</span><span class="p">(</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">float</span><span class="p">(</span><span class="mf">100.0</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">),</span>  <span class="c1"># Start with $100</span>
    <span class="k">lambda</span> <span class="n">amount</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">float</span><span class="p">(</span><span class="n">amount</span> <span class="o">*</span> <span class="mf">1.01</span><span class="p">,</span> <span class="n">amount</span> <span class="o">*</span> <span class="mf">1.1</span><span class="p">),</span>  <span class="c1"># Grow 1-10%</span>
    <span class="n">min_size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">max_size</span><span class="o">=</span><span class="mi">20</span>
<span class="p">)</span>
<span class="c1"># Result: 156.34 - single float (final amount after compounding)</span>

<span class="c1"># Strictly increasing - final value</span>
<span class="n">final_value_gen</span> <span class="o">=</span> <span class="n">Gen</span><span class="o">.</span><span class="n">accumulate</span><span class="p">(</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
    <span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">5</span><span class="p">),</span>
    <span class="n">min_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">max_size</span><span class="o">=</span><span class="mi">15</span>
<span class="p">)</span>
<span class="c1"># Result: 47 - single int (final value after 10-15 increasing steps)</span>
</code></pre></div></p>
<p><strong>Fluent API Examples:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># Fluent style</span>
<span class="n">final_position</span> <span class="o">=</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span><span class="o">.</span><span class="n">accumulate</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">pos</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">pos</span> <span class="o">-</span> <span class="mi">10</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">10</span><span class="p">)),</span>
    <span class="n">min_size</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
    <span class="n">max_size</span><span class="o">=</span><span class="mi">30</span>
<span class="p">)</span>

<span class="c1"># Use with map</span>
<span class="n">final_state</span> <span class="o">=</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">accumulate</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">state</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">state</span> <span class="o">+</span> <span class="mi">10</span><span class="p">),</span>
    <span class="n">min_size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">max_size</span><span class="o">=</span><span class="mi">10</span>
<span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">final</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Final state: </span><span class="si">{</span><span class="n">final</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></p>
<p><strong>Use Cases:</strong>
- Testing end states of stochastic processes
- Simulating compound growth/decay
- Testing final outcomes without intermediate steps
- Generating complex derived values
- Simulating iterative algorithms (final result only)
- Testing convergence properties</p>
<p><strong>See Also:</strong> <a href="#genchainbase_gen-gen_factory-generatorchaingen_factory"><code>Gen.chain()</code></a>, <a href="#genaggregateinitial_gen-gen_factory-min_size-max_size-generatoraggregate"><code>Gen.aggregate()</code></a>, <a href="../decorators/#run_for_all"><code>@run_for_all</code> decorator</a></p>
<h3 id="comparison-chain-vs-aggregate-vs-accumulate">Comparison: <code>chain</code> vs <code>aggregate</code> vs <code>accumulate</code><a class="headerlink" href="#comparison-chain-vs-aggregate-vs-accumulate" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Feature</th>
<th><a href="#genchainbase_gen-gen_factory-generatorchaingen_factory"><code>chain</code></a></th>
<th><a href="#genaggregateinitial_gen-gen_factory-min_size-max_size-generatoraggregate"><code>aggregate</code></a></th>
<th><a href="#genaccumulateinitial_gen-gen_factory-min_size-max_size-generatoraccumulate"><code>accumulate</code></a></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Returns</strong></td>
<td>Tuple of all values</td>
<td>List of all values</td>
<td>Single final value</td>
</tr>
<tr>
<td><strong>Dependency</strong></td>
<td>Each depends on all previous</td>
<td>Each depends on immediate previous</td>
<td>Each depends on immediate previous</td>
</tr>
<tr>
<td><strong>Result Size</strong></td>
<td>Fixed (base + 1)</td>
<td>Variable (min_size to max_size)</td>
<td>Single value</td>
</tr>
<tr>
<td><strong>Use When</strong></td>
<td>Need all related values</td>
<td>Need full sequence history</td>
<td>Only care about end result</td>
</tr>
<tr>
<td><strong>Example</strong></td>
<td>(month, day, hour)</td>
<td>[1, 3, 5, 8, 12]</td>
<td>47</td>
</tr>
</tbody>
</table>
<p><strong>Example Comparison:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># Chain: Get tuple of related values</span>
<span class="n">date</span> <span class="o">=</span> <span class="n">Gen</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">m</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">days_in_month</span><span class="p">(</span><span class="n">m</span><span class="p">)))</span>
<span class="c1"># Result: (3, 15) - tuple of (month, day)</span>

<span class="c1"># Aggregate: Get list showing full progression</span>
<span class="n">path</span> <span class="o">=</span> <span class="n">Gen</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">5</span><span class="p">),</span> <span class="n">min_size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">max_size</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="c1"># Result: [0, 3, 6, 10, 14] - full path shown</span>

<span class="c1"># Accumulate: Get only final position</span>
<span class="n">final</span> <span class="o">=</span> <span class="n">Gen</span><span class="o">.</span><span class="n">accumulate</span><span class="p">(</span><span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">5</span><span class="p">),</span> <span class="n">min_size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">max_size</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="c1"># Result: 14 - only final value</span>
</code></pre></div></p>
<h2 id="class-construction-combinators">Class Construction Combinators<a class="headerlink" href="#class-construction-combinators" title="Permanent link">&para;</a></h2>
<h3 id="genconstructtype-generators"><code>Gen.construct(Type, *generators)</code><a class="headerlink" href="#genconstructtype-generators" title="Permanent link">&para;</a></h3>
<p>Creates instances of a class using the specified generators for constructor arguments.</p>
<p><strong>Parameters:</strong>
- <code>Type</code> (type): Class to instantiate
- <code>*generators</code> (Generator): Generators for constructor arguments</p>
<p><strong>Examples:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># Simple class construction</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Point</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>

<span class="n">Gen</span><span class="o">.</span><span class="n">construct</span><span class="p">(</span><span class="n">Point</span><span class="p">,</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(),</span> <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">())</span>

<span class="c1"># Complex class construction</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Person</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">email</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">email</span> <span class="o">=</span> <span class="n">email</span>

<span class="n">Gen</span><span class="o">.</span><span class="n">construct</span><span class="p">(</span>
    <span class="n">Person</span><span class="p">,</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="n">min_length</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">),</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="n">min_value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">max_value</span><span class="o">=</span><span class="mi">120</span><span class="p">),</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="n">min_length</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Using with other combinators</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Rectangle</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">height</span>

<span class="n">Gen</span><span class="o">.</span><span class="n">construct</span><span class="p">(</span>
    <span class="n">Rectangle</span><span class="p">,</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">float</span><span class="p">(</span><span class="n">min_value</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">max_value</span><span class="o">=</span><span class="mf">100.0</span><span class="p">),</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">float</span><span class="p">(</span><span class="n">min_value</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">max_value</span><span class="o">=</span><span class="mf">100.0</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">rect</span><span class="p">:</span> <span class="n">rect</span><span class="o">.</span><span class="n">width</span> <span class="o">&gt;</span> <span class="n">rect</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>  <span class="c1"># Only tall rectangles</span>
</code></pre></div></p>
<p><strong>Use Cases:</strong>
- Testing custom classes
- Generating domain objects
- Creating structured test data
- Testing object-oriented code</p>
<p><strong>See Also:</strong> <a href="#generatormapfunc"><code>generator.map()</code></a>, <a href="#generatorfilterpredicate"><code>generator.filter()</code></a></p>
<h2 id="advanced-combinator-patterns">Advanced Combinator Patterns<a class="headerlink" href="#advanced-combinator-patterns" title="Permanent link">&para;</a></h2>
<h3 id="chaining-combinators">Chaining Combinators<a class="headerlink" href="#chaining-combinators" title="Permanent link">&para;</a></h3>
<p>Combinators can be chained together to create complex generators. See also the individual combinator documentation: <a href="#generatormapfunc"><code>map</code></a>, <a href="#generatorfilterpredicate"><code>filter</code></a>, <a href="#generatorflat_mapfunc"><code>flat_map</code></a>, <a href="#genone_ofgenerators"><code>one_of</code></a>.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Chain multiple transformations</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="n">min_value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_value</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>\
    <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>\
    <span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>\
    <span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>

<span class="c1"># Chain with selection</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">one_of</span><span class="p">(</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">str</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Value: </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Chain with construction</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">construct</span><span class="p">(</span>
    <span class="n">Point</span><span class="p">,</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">)</span>
</code></pre></div>
<h3 id="conditional-generation">Conditional Generation<a class="headerlink" href="#conditional-generation" title="Permanent link">&para;</a></h3>
<p>Use <a href="#generatorflat_mapfunc"><code>flat_map</code></a> for conditional generation:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Conditional based on value</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">()</span><span class="o">.</span><span class="n">flat_map</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="n">min_length</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span>
              <span class="k">else</span> <span class="n">Gen</span><span class="o">.</span><span class="n">just</span><span class="p">(</span><span class="s2">&quot;negative&quot;</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Conditional based on type</span>
<span class="n">Gen</span><span class="o">.</span><span class="n">one_of</span><span class="p">(</span><span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(),</span> <span class="n">Gen</span><span class="o">.</span><span class="n">str</span><span class="p">())</span><span class="o">.</span><span class="n">flat_map</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">Gen</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(),</span> <span class="n">min_length</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
              <span class="k">else</span> <span class="n">Gen</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">Gen</span><span class="o">.</span><span class="n">str</span><span class="p">(),</span> <span class="n">min_length</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div>
<h3 id="recursive-generation">Recursive Generation<a class="headerlink" href="#recursive-generation" title="Permanent link">&para;</a></h3>
<p>Use <code>Gen.lazy()</code> for recursive generators. See also <a href="#genone_ofgenerators"><code>Gen.one_of()</code></a> and <a href="#genconstructtype-generators"><code>Gen.construct()</code></a>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Recursive tree structure</span>
<span class="k">def</span><span class="w"> </span><span class="nf">tree_gen</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">Gen</span><span class="o">.</span><span class="n">one_of</span><span class="p">(</span>
        <span class="n">Gen</span><span class="o">.</span><span class="n">just</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span>  <span class="c1"># Leaf node</span>
        <span class="n">Gen</span><span class="o">.</span><span class="n">construct</span><span class="p">(</span>
            <span class="n">TreeNode</span><span class="p">,</span>
            <span class="n">Gen</span><span class="o">.</span><span class="n">int</span><span class="p">(),</span>
            <span class="n">Gen</span><span class="o">.</span><span class="n">lazy</span><span class="p">(</span><span class="n">tree_gen</span><span class="p">),</span>  <span class="c1"># Left subtree</span>
            <span class="n">Gen</span><span class="o">.</span><span class="n">lazy</span><span class="p">(</span><span class="n">tree_gen</span><span class="p">)</span>   <span class="c1"># Right subtree</span>
        <span class="p">)</span>
    <span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TreeNode</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">left</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">right</span>
</code></pre></div>
<h2 id="best-practices">Best Practices<a class="headerlink" href="#best-practices" title="Permanent link">&para;</a></h2>
<h3 id="performance-considerations">Performance Considerations<a class="headerlink" href="#performance-considerations" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Avoid overly restrictive filters</strong>: Use <code>Gen.in_range()</code> instead of <a href="#generatorfilterpredicate"><code>filter</code></a> for ranges</li>
<li><strong>Use appropriate generators</strong>: Choose the right generator for your needs (see <a href="../generators/">Generators documentation</a>)</li>
<li><strong>Consider weights</strong>: Use <a href="#genweighted_gengenerator-weight"><code>weighted_gen</code></a>/<a href="#genweighted_valuevalue-weight"><code>weighted_value</code></a> for realistic distributions</li>
<li><strong>Chain efficiently</strong>: Order transformations to minimize rejected values</li>
</ol>
<h3 id="readability-tips">Readability Tips<a class="headerlink" href="#readability-tips" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Use descriptive names</strong>: Name your generators clearly</li>
<li><strong>Break down complex generators</strong>: Split complex logic into smaller parts</li>
<li><strong>Add comments</strong>: Explain complex generation logic</li>
<li><strong>Use type hints</strong>: Help with IDE support and documentation</li>
</ol>
<h3 id="testing-strategies">Testing Strategies<a class="headerlink" href="#testing-strategies" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Test edge cases</strong>: Use <code>Gen.just()</code> for specific values</li>
<li><strong>Test realistic data</strong>: Use weighted selection for realistic distributions</li>
<li><strong>Test boundary conditions</strong>: Use <code>Gen.in_range()</code> for boundary testing</li>
<li><strong>Test error conditions</strong>: Use <a href="#genelement_ofvalues"><code>Gen.element_of()</code></a> for error cases</li>
<li><strong>Test dependent data</strong>: Use <a href="#genchainbase_gen-gen_factory-generatorchaingen_factory"><code>chain</code></a>, <a href="#genaggregateinitial_gen-gen_factory-min_size-max_size-generatoraggregate"><code>aggregate</code></a>, or <a href="#genaccumulateinitial_gen-gen_factory-min_size-max_size-generatoraccumulate"><code>accumulate</code></a> for dependent generation</li>
</ol>
<p>Combinators are the key to creating sophisticated test data that matches your specific needs. By combining and transforming basic generators, you can create generators for any data structure or constraint your tests require. For more information, see:</p>
<ul>
<li><a href="../generators/">Generators documentation</a> - Basic generators</li>
<li><a href="../decorators/">Decorators documentation</a> - Using generators in tests with <code>@for_all</code> and <code>@run_for_all</code></li>
<li><a href="../properties/">Properties documentation</a> - Writing property-based tests</li>
</ul>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="October 27, 2025 09:19:56 UTC">October 27, 2025</span>
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tracking", "navigation.tabs.sticky", "navigation.indexes", "navigation.path", "toc.follow", "navigation.top", "search.highlight", "search.suggest", "navigation.expand"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>